!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s(require("element-ui"),require("axios")):"function"==typeof define&&define.amd?define(["element-ui","axios"],s):(e="undefined"!=typeof globalThis?globalThis:e||self).App=s(e.elementUi,e.axios)}(this,(function(e,s){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=n(s),t=a.default.create({timeout:1e4,baseURL:process.env.VUE_APP_BASE_API});t.interceptors.request.use((function(e){var s=localStorage.getItem("token");return s&&(e.headers.common.token=s),e}),(function(e){return Promise.reject(e)})),t.interceptors.response.use((function(e){return Promise.resolve(function(e){return 401===parseInt(e.data&&e.data.code)&&(localStorage.removeItem("token"),window.location.href="/login"),"blob"===e.config.responseType?e:e.data}(e))}),(function(s){if(s&&s.response)!function(e){switch(e.response.status){case 200:e.message="错误响应也会有状态码为200的情况";break;case 400:e.message="请求错误(400)";break;case 401:e.message="您没有此功能权限，如需开通，请联系管理员。";break;case 403:e.message="登陆过期，请重新登录(403)";break;case 404:e.message="请求错误,未找到该资源(404)";break;case 408:e.message="请求超时(408)";break;case 500:e.message="服务器错误(500)";break;case 501:e.message="服务未实现(501)";break;case 502:e.message="网络错误(502)";break;case 503:e.message="服务不可用(503)";break;case 504:e.message="网络超时(504)";break;case 505:e.message="HTTP版本不受支持(505)";break;default:e.message="连接出错，状态码：(".concat(e.response.status,")!")}}(s);else{if(a.default.isCancel(s))throw new a.default.Cancel(s.message);JSON.stringify(s).includes("timeout")?s.message="服务器响应超时，请刷新当前页":s.message="连接服务器失败!"}return e.Message.error(s.message),Promise.reject(s)}));var o=new Map,r=[],i=function(e){r.forEach((function(s){e.component(s.name,s)}))};return"undefined"!=typeof window&&window.Vue&&i(window.Vue),{install:i,request:function(s){var n,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a&&(n=e.Loading.service({fullscreen:!0,lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.8)"})),new Promise((function(a,r){t(s).then((function(s){0===s.code?(o.delete(401),a(s)):(o.has(401)||e.Message({message:s.msg||"请求异常",type:"error"}),401===s.code&&o.set(s.code,JSON.stringify(s)),r(s))})).finally((function(){n.close()}))}))}}}));
